"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[710],{710:(G,u,c)=>{c.r(u),c.d(u,{Tab1Page:()=>B});var m=c(467),r=c(2220),p=c(177),d=c(4341),h=c(5079),g=c(5873),f=c(3273),b=c(6766),e=c(4438),k=c(8287),P=c(9967),T=c(9350);const v=()=>[0,.5,1],j=()=>[1,2,3,4],w=()=>[1,2,3,4,5],E=()=>({"text-transform":"none"});function R(s,l){1&s&&(e.j41(0,"swiper-slide")(1,"ion-grid")(2,"ion-row",18)(3,"ion-col",19)(4,"ion-avatar",20),e.nrm(5,"ion-skeleton-text",21),e.k0s(),e.nrm(6,"ion-skeleton-text",22),e.k0s()()()())}function O(s,l){1&s&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-item",23)(3,"ion-avatar",24),e.nrm(4,"ion-skeleton-text",25),e.k0s(),e.j41(5,"ion-label"),e.nrm(6,"ion-skeleton-text",26),e.j41(7,"p"),e.nrm(8,"ion-skeleton-text",27),e.k0s()()()(),e.j41(9,"ion-img"),e.nrm(10,"ion-skeleton-text",28),e.k0s(),e.j41(11,"ion-card-content")(12,"ion-item",23),e.nrm(13,"ion-skeleton-text",29),e.k0s()()())}function x(s,l){1&s&&(e.qex(0),e.nrm(1,"ion-skeleton-text",15),e.j41(2,"swiper-container",16),e.DNE(3,R,7,0,"swiper-slide",17),e.k0s(),e.DNE(4,O,14,0,"ion-card",17),e.bVm()),2&s&&(e.R7$(2),e.Y8G("slidesPerView",3.5),e.R7$(),e.Y8G("ngForOf",e.lJ4(3,j)),e.R7$(),e.Y8G("ngForOf",e.lJ4(4,w)))}function F(s,l){if(1&s){const o=e.RV6();e.j41(0,"swiper-slide",35),e.bIt("click",function(){const i=e.eBV(o).$implicit,n=e.XpG(3);return e.Njj(n.navigateToUser(i.uid))}),e.j41(1,"ion-grid")(2,"ion-row",18)(3,"ion-col",36)(4,"ion-avatar",37),e.nrm(5,"img",38),e.k0s(),e.j41(6,"ion-label",39),e.EFF(7),e.k0s()()()()()}if(2&s){const o=l.$implicit;e.R7$(5),e.Y8G("src",o.profilePic,e.B4B),e.R7$(2),e.JRh(o.userName)}}function M(s,l){if(1&s&&(e.j41(0,"div",32)(1,"ion-note",33),e.EFF(2,"People You Follow"),e.k0s(),e.j41(3,"swiper-container",16),e.DNE(4,F,8,2,"swiper-slide",34),e.k0s()()),2&s){const o=e.XpG(2);e.R7$(3),e.Y8G("slidesPerView",3.5),e.R7$(),e.Y8G("ngForOf",o.followers)}}function D(s,l){if(1&s){const o=e.RV6();e.j41(0,"swiper-slide",35),e.bIt("click",function(){const i=e.eBV(o).$implicit,n=e.XpG(3);return e.Njj(n.navigateToUser(i.uid))}),e.j41(1,"ion-grid")(2,"ion-row",18)(3,"ion-col",36)(4,"ion-avatar",37),e.nrm(5,"img",38),e.k0s(),e.j41(6,"ion-label",39),e.EFF(7),e.k0s()()()()()}if(2&s){const o=l.$implicit;e.R7$(5),e.Y8G("src",o.profilePic,e.B4B),e.R7$(2),e.JRh(o.userName)}}function C(s,l){if(1&s&&(e.j41(0,"ion-note",33),e.EFF(1,"Follow Suggestions"),e.k0s(),e.j41(2,"swiper-container",16),e.DNE(3,D,8,2,"swiper-slide",34),e.k0s()),2&s){const o=e.XpG(2);e.R7$(2),e.Y8G("slidesPerView",3.5),e.R7$(),e.Y8G("ngForOf",o.followSuggestionsList)}}function I(s,l){if(1&s){const o=e.RV6();e.j41(0,"ion-list",40)(1,"ion-item",41),e.bIt("click",function(){const i=e.eBV(o).$implicit,n=e.XpG(2);return e.Njj(n.navigateToUser(i.uid))}),e.j41(2,"ion-avatar",24),e.nrm(3,"img",42),e.k0s(),e.j41(4,"ion-label"),e.EFF(5),e.j41(6,"p",43),e.nrm(7,"ion-icon",44),e.EFF(8),e.k0s()(),e.j41(9,"ion-button",45),e.bIt("click",function(i){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj(a.followUser(n.uid,n,i))}),e.EFF(10),e.k0s()(),e.nrm(11,"ion-img",46),e.j41(12,"ion-item",23)(13,"ion-text"),e.EFF(14),e.k0s()(),e.j41(15,"ion-grid")(16,"ion-row")(17,"ion-col",47)(18,"ion-button",48),e.bIt("click",function(i){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj(a.onToggleLikePost(n.id,i))}),e.nrm(19,"ion-icon",49),e.j41(20,"span"),e.EFF(21),e.k0s()(),e.j41(22,"ion-button",50),e.bIt("click",function(){const i=e.eBV(o).$implicit,n=e.XpG(2);return e.Njj(n.openCommentModal(i))}),e.nrm(23,"ion-icon",51),e.k0s()(),e.j41(24,"ion-col",52)(25,"ion-button",50),e.bIt("click",function(){const i=e.eBV(o).$implicit,n=e.XpG(2);return e.Njj(n.savePost(i.id))}),e.nrm(26,"ion-icon",53),e.k0s()()()()()}if(2&s){const o=l.$implicit;e.R7$(3),e.Y8G("src",o.profilePic,e.B4B),e.R7$(2),e.SpI(" ",o.userName," "),e.R7$(3),e.SpI(" ",o.location," "),e.R7$(),e.Y8G("ngStyle",e.lJ4(10,E)),e.R7$(),e.SpI(" ",o.isFollowing?"Following":"Follow"," "),e.R7$(),e.Y8G("src",o.postLink),e.R7$(3),e.JRh(o.caption),e.R7$(5),e.Y8G("name",o.userLikes?"heart":"heart-outline")("color",o.userLikes?"primary":"dark"),e.R7$(2),e.JRh(o.likes)}}function y(s,l){if(1&s&&e.DNE(0,M,5,2,"div",30)(1,C,4,2,"ng-template",null,2,e.C5r)(3,I,27,11,"ion-list",31),2&s){const o=e.sdS(2),t=e.XpG();e.Y8G("ngIf",t.followers.length>0)("ngIfElse",o),e.R7$(3),e.Y8G("ngForOf",t.posts)("ngForTrackBy",t.trackPostById)}}function S(s,l){if(1&s&&(e.j41(0,"ion-list")(1,"ion-item",33)(2,"ion-avatar",24),e.nrm(3,"img",42),e.k0s(),e.j41(4,"ion-label")(5,"p"),e.EFF(6),e.k0s(),e.EFF(7),e.k0s()()()),2&s){const o=l.$implicit;e.R7$(3),e.Y8G("src",o.profilePic,e.B4B),e.R7$(3),e.JRh(o.userName),e.R7$(),e.SpI(" ",o.comment," ")}}function $(s,l){if(1&s){const o=e.RV6();e.j41(0,"ion-header",54)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Comments"),e.k0s()()(),e.j41(4,"ion-content"),e.DNE(5,S,8,3,"ion-list",17),e.k0s(),e.j41(6,"ion-footer",55)(7,"ion-toolbar")(8,"form",56,3),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.addComment(i.selectedPost.id))}),e.j41(10,"ion-item")(11,"ion-input",57),e.mxI("ngModelChange",function(i){e.eBV(o);const n=e.XpG();return e.DH7(n.comments,i)||(n.comments=i),e.Njj(i)}),e.k0s(),e.j41(12,"ion-buttons",58)(13,"ion-button",59),e.nrm(14,"ion-icon",60),e.k0s()()()()()()}if(2&s){const o=e.sdS(9),t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.postComments),e.R7$(),e.Y8G("keyboardAttach",!0),e.R7$(5),e.R50("ngModel",t.comments),e.R7$(2),e.Y8G("disabled",o.invalid)}}let B=(()=>{var s;class l{constructor(t,i,n,a){this.firebaseService=t,this.firestore=i,this.toast=n,this.router=a,this.posts=null,this.comments="",this.userDetails=null,this.postComments=null,this.selectedPost=null,this.isModalOpen=!1,this.userLikes=!1,this.loading=!0,this.followers=[],this.followSuggestionsList=[],(0,h.a)({notificationsOutline:g.rqk,location:g.C5I,heartOutline:g.neQ,heart:g.Hmd,chatbubbleOutline:g.DD4,bookmarkOutline:g.dm8,close:g.VNx,sendOutline:g.NF$,chatbubblesOutline:g.c1w})}loadSuggestions(){var t=this;const i=(0,f.rJ)(this.firestore,"users");(0,f.aQ)(i,function(){var n=(0,m.A)(function*(a){t.followSuggestionsList=a.docs.map(_=>_.data())});return function(a){return n.apply(this,arguments)}}())}ngOnInit(){var t=this;return(0,m.A)(function*(){t.loading=!0,t.loadSuggestions();const i=yield t.firebaseService.getCurrentUser();i&&(t.userDetails=yield t.firebaseService.loadUserDetail(i.uid),t.userDetails.following&&(t.followers=yield t.loadFollowerDetails(t.userDetails.following))),yield t.firebaseService.loadPost(),t.firebaseService.posts$.subscribe(function(){var n=(0,m.A)(function*(a){t.posts=a,t.loading=!1;for(const _ of t.posts)_.userLikes=yield t.firebaseService.userLikeThisPost(_.id),_.isFollowing=yield t.firebaseService.isFollowing(_.uid)});return function(a){return n.apply(this,arguments)}}())})()}trackPostById(t,i){return i.id}followUser(t,i,n){var a=this;return(0,m.A)(function*(){n.stopPropagation(),yield a.firebaseService.followUser(t),i.isFollowing=!i.isFollowing})()}doRefresh(t){var i=this;setTimeout((0,m.A)(function*(){yield i.ngOnInit(),t.target.complete()}),3e3)}openCommentModal(t){var i=this;return(0,m.A)(function*(){i.selectedPost=t,i.isModalOpen=!0,i.firebaseService.loadComments(t.id),i.firebaseService.comments$.subscribe(n=>{i.postComments=n})})()}closeModal(){this.isModalOpen=!1,this.selectedPost=null,this.postComments=[]}addComment(t){var i=this;return(0,m.A)(function*(){const n=yield i.firebaseService.getCurrentUser();n&&(i.firebaseService.postComment(n.uid,t,i.comments),i.comments=""),i.firebaseService.loadComments(t)})()}onToggleLikePost(t,i){var n=this;return(0,m.A)(function*(){i.preventDefault(),i.stopImmediatePropagation();const a=yield n.userDetails.uid;a?yield n.firebaseService.toggleLikePost(t,a):console.log("User must be logged in to like or unlike a post.")})()}savePost(t){var i=this;return(0,m.A)(function*(){const n=yield i.firebaseService.getCurrentUser();n&&(i.firebaseService.savePost(n.uid,t),(yield i.toast.create({message:"Post Saved",duration:3e3,position:"top"})).present())})()}navigateToUser(t){this.router.navigate(["/user",t])}loadFollowerDetails(t){var i=this;return(0,m.A)(function*(){const n=[];for(const a of t){const _=yield i.firebaseService.loadUserDetail(a);_&&n.push(_)}return n})()}}return(s=l).\u0275fac=function(t){return new(t||s)(e.rXU(k.f),e.rXU(P._7),e.rXU(T.K_),e.rXU(b.Ix))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-tab1"]],standalone:!0,features:[e.aNF],decls:18,vars:7,consts:[["postsList",""],["modal",""],["followSuggestions",""],["f","ngForm"],[1,"ion-no-border"],["mode","ios","size","large","color","primary"],["slot","end","mode","md"],["routerLink","/notification"],["name","notifications-outline","size","large"],["routerLink","/chat"],["name","chatbubbles-outline","size","large"],["slot","fixed","mode","ios",3,"ionRefresh"],["refreshingSpinner","circles","refreshingText","Refreshing..."],[4,"ngIf","ngIfElse"],[3,"ionModalDidDismiss","isOpen","initialBreakpoint","breakpoints","keyboardAttach"],["animated","",1,"ion-margin",2,"width","40%"],[3,"slidesPerView"],[4,"ngFor","ngForOf"],[1,"ion-justify-content-center","ion-align-items-center"],["size","12",1,"ion-justify-content-center"],[2,"width","90px","height","90px"],["animated",""],["animated","",2,"width","90%"],["lines","none"],["slot","start"],["animated","",2,"width","40px","height","40px"],["animated","",2,"width","100px"],["animated","",2,"width","80px"],["animated","",2,"width","100%","height","200px"],["animated","",2,"width","80%"],["class","ion-margin-top",4,"ngIf","ngIfElse"],["class","ion-margin-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-margin-top"],[1,"ion-margin"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["size","12",1,"ion-text-center"],[1,"avatar"],["alt","Profile Picture",3,"src"],[1,"userName-label","ion-margin-top"],[1,"ion-margin-bottom"],["lines","none",3,"click"],["alt","",3,"src"],[1,"location-label"],["name","location"],["slot","end","color","primary","shape","round","size","default",3,"click","ngStyle"],[3,"src"],[1,"ion-text-start"],["fill","clear","size","large","color","dark","type","button",3,"click"],[3,"name","color"],["fill","clear","size","large",3,"click"],["color","dark","name","chatbubble-outline"],[1,"ion-text-end"],["color","dark","name","bookmark-outline"],["mode","md"],[3,"keyboardAttach"],[3,"ngSubmit"],["placeholder","Write comments...","name","comment","required","",3,"ngModelChange","ngModel"],["slot","end"],["type","submit",3,"disabled"],["name","send-outline","color","primary"]],template:function(t,i){if(1&t){const n=e.RV6();e.j41(0,"ion-header",4)(1,"ion-toolbar")(2,"ion-title",5),e.EFF(3,"vibo"),e.k0s(),e.j41(4,"ion-buttons",6)(5,"ion-button",7),e.nrm(6,"ion-icon",8),e.k0s(),e.j41(7,"ion-button",9),e.nrm(8,"ion-icon",10),e.k0s()()()(),e.j41(9,"ion-content")(10,"ion-refresher",11),e.bIt("ionRefresh",function(_){return e.eBV(n),e.Njj(i.doRefresh(_))}),e.nrm(11,"ion-refresher-content",12),e.k0s(),e.DNE(12,x,5,5,"ng-container",13)(13,y,4,4,"ng-template",null,0,e.C5r),e.j41(15,"ion-modal",14,1),e.bIt("ionModalDidDismiss",function(){return e.eBV(n),e.Njj(i.closeModal())}),e.DNE(17,$,15,4,"ng-template"),e.k0s()()}if(2&t){const n=e.sdS(14);e.R7$(12),e.Y8G("ngIf",i.loading)("ngIfElse",n),e.R7$(3),e.Y8G("isOpen",i.isModalOpen)("initialBreakpoint",1)("breakpoints",e.lJ4(6,v))("keyboardAttach",!0)}},dependencies:[r.ds,r.ln,r.lO,r.hU,r.Ki,r.To,r.$w,r.M0,r.Sb,r.Jm,r.QW,r.IO,r.JI,r.iq,r.KW,r.I9,r.uz,r.mC,r.he,r.ME,p.MD,p.Sq,p.bT,p.B3,d.YN,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,r.b_,r.nf,r.eU,r.ai,r.BC,r.W9,b.Wk],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 60px;--padding-top: 20px;--padding-bottom: 20px;font-family:Miltonian Tattoo,serif}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}ion-content[_ngcontent-%COMP%]   .userName-label[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:90px}ion-content[_ngcontent-%COMP%]   .location-label[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:200px}ion-content[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:90px;height:90px;border:2px solid var(--ion-color-primary);padding:3px}"]}),l})()}}]);