"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7132],{7132:(R,p,l)=>{l.r(p),l.d(p,{UserPage:()=>F});var c=l(467),g=l(177),u=l(4341),s=l(2220),h=l(5079),d=l(5873),e=l(4438),f=l(6766),b=l(8287),P=l(9350);const k=()=>[0,.5,1];function D(r,a){if(1&r){const t=e.RV6();e.j41(0,"ion-col",16)(1,"ion-card",21),e.nrm(2,"ion-img",22),e.j41(3,"div",23)(4,"ion-button",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.onToggleLikePost(n))}),e.nrm(5,"ion-icon",25),e.j41(6,"span"),e.EFF(7),e.k0s()(),e.j41(8,"ion-button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.openCommentModal(n.id))}),e.nrm(9,"ion-icon",27),e.k0s()()()()}if(2&r){const t=a.$implicit;e.R7$(2),e.Y8G("src",t.postLink),e.R7$(3),e.Y8G("name",t.userLikes?"heart":"heart-outline")("color",t.userLikes?"primary":"dark"),e.R7$(2),e.JRh(t.likes)}}function E(r,a){if(1&r&&(e.j41(0,"ion-row"),e.DNE(1,D,10,4,"ion-col",20),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.ThisUserPosts)}}function U(r,a){1&r&&(e.j41(0,"ion-row")(1,"ion-col",11)(2,"p"),e.EFF(3,"No posts available"),e.k0s()()())}function v(r,a){if(1&r&&(e.j41(0,"ion-list")(1,"ion-item")(2,"ion-avatar",4),e.nrm(3,"img",34),e.k0s(),e.j41(4,"ion-label")(5,"p"),e.EFF(6),e.k0s(),e.EFF(7),e.k0s()()()),2&r){const t=a.$implicit;e.R7$(3),e.Y8G("src",t.profilePic,e.B4B),e.R7$(3),e.JRh(t.userName),e.R7$(),e.SpI(" ",t.comment," ")}}function j(r,a){if(1&r){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Comments"),e.k0s()()(),e.j41(4,"ion-content"),e.DNE(5,v,8,3,"ion-list",28),e.k0s(),e.j41(6,"ion-footer")(7,"ion-toolbar")(8,"form",29,2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addComment(n.selectedPost))}),e.j41(10,"ion-item")(11,"ion-input",30),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.comments,n)||(i.comments=n),e.Njj(n)}),e.k0s(),e.j41(12,"ion-buttons",31)(13,"ion-button",32),e.nrm(14,"ion-icon",33),e.k0s()()()()()()}if(2&r){const t=e.sdS(9),o=e.XpG();e.R7$(5),e.Y8G("ngForOf",o.postComments),e.R7$(6),e.R50("ngModel",o.comments),e.R7$(2),e.Y8G("disabled",t.invalid)}}let F=(()=>{var r;class a{constructor(o,n,i,_){this.route=o,this.firebaseService=n,this.loadingController=i,this.router=_,this.userDetails=null,this.userName="",this.isFollowing=!1,this.ThisUserPosts=[],this.isModalOpen=!1,this.postComments=null,this.userLikes=!1,(0,h.a)({heartOutline:d.neQ,chatbubbleOutline:d.DD4,sendOutline:d.NF$,heart:d.Hmd})}presentLoader(){var o=this;return(0,c.A)(function*(){const n=yield o.loadingController.create({spinner:"lines-sharp",mode:"ios"});return yield n.present(),n})()}dismissLoader(o){return(0,c.A)(function*(){yield o.dismiss()})()}ngOnInit(){var o=this;return(0,c.A)(function*(){const n=yield o.presentLoader(),i=o.route.snapshot.paramMap.get("uid");if(i){o.userDetails=yield o.firebaseService.loadUserDetail(i),o.userName=`@${o.userDetails.userName}`,o.isFollowing=yield o.firebaseService.isFollowing(i);const _=yield o.firebaseService.loadSeparateUsersPost(i);o.ThisUserPosts=_||[];for(const m of o.ThisUserPosts)m.userLikes=yield o.firebaseService.userLikeThisPost(m.id),console.log(m)}yield o.dismissLoader(n)})()}doRefresh(o){var n=this;setTimeout((0,c.A)(function*(){yield n.ngOnInit(),o.target.complete()}),3e3)}followUser(o){var n=this;return(0,c.A)(function*(){yield n.firebaseService.followUser(o),n.ngOnInit()})()}openCommentModal(o){var n=this;return(0,c.A)(function*(){n.selectedPost=o,n.isModalOpen=!0,n.firebaseService.loadComments(o),n.firebaseService.comments$.subscribe(i=>{n.postComments=i})})()}closeModal(){this.isModalOpen=!1,this.selectedPost=null,this.postComments=[]}addComment(o){var n=this;return(0,c.A)(function*(){const i=yield n.firebaseService.getCurrentUser();i&&(n.firebaseService.postComment(i.uid,o,n.comments),n.comments=""),n.firebaseService.loadComments("WatLSeuNfbKPph5gsqN4")})()}onToggleLikePost(o){var n=this;return(0,c.A)(function*(){const i=n.userDetails.uid;i?(yield n.firebaseService.toggleLikePost(o.id,i),yield n.ngOnInit()):console.log("User must be logged in to like or unlike a post.")})()}navigateChat(o){this.router.navigate(["/conversation",o])}}return(r=a).\u0275fac=function(o){return new(o||r)(e.rXU(f.nX),e.rXU(b.f),e.rXU(P.Xi),e.rXU(f.Ix))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-user"]],standalone:!0,features:[e.aNF],decls:46,vars:13,consts:[["noPosts",""],["modal",""],["f","ngForm"],[1,"ion-no-border"],["slot","start"],["slot","fixed","mode","ios",3,"ionRefresh"],["refreshingSpinner","circles","refreshingText","Refreshing..."],[1,"ion-justify-content-center"],["size","auto",1,"ion-text-center"],[1,"avatar"],[3,"src"],["size","12",1,"ion-text-center"],[1,"ion-justify-content-around","ion-padding-vertical"],["size","4",1,"ion-text-center"],["size","6",1,"ion-text-center"],["expand","block",3,"click"],["size","6"],["expand","block","color","secondary",3,"click"],[4,"ngIf","ngIfElse"],[3,"ionModalDidDismiss","isOpen","initialBreakpoint","breakpoints"],["size","6",4,"ngFor","ngForOf"],["mode","ios",1,"post-card"],[1,"post-image",3,"src"],[1,"post-overlay"],["fill","clear","size","large","color","dark","type","button",3,"click"],[3,"name","color"],["fill","clear",3,"click"],["color","dark","name","chatbubble-outline"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["placeholder","Write comments...","name","comment","required","",3,"ngModelChange","ngModel"],["slot","end"],["type","submit",3,"disabled"],["name","send-outline","color","medium"],["alt","",3,"src"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"ion-header",3)(1,"ion-toolbar")(2,"ion-buttons",4),e.nrm(3,"ion-back-button"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-refresher",5),e.bIt("ionRefresh",function(m){return e.eBV(i),e.Njj(n.doRefresh(m))}),e.nrm(6,"ion-refresher-content",6),e.k0s(),e.nrm(7,"ion-loading"),e.j41(8,"ion-grid")(9,"ion-row",7)(10,"ion-col",8)(11,"ion-avatar",9),e.nrm(12,"img",10),e.k0s()()(),e.j41(13,"ion-row",7)(14,"ion-col",11)(15,"ion-text")(16,"h2"),e.EFF(17),e.k0s(),e.j41(18,"p"),e.EFF(19),e.k0s(),e.j41(20,"p"),e.EFF(21),e.k0s()()()(),e.j41(22,"ion-row",12)(23,"ion-col",13)(24,"ion-text"),e.EFF(25,"Followers"),e.k0s(),e.j41(26,"p"),e.EFF(27),e.k0s()(),e.j41(28,"ion-col",13)(29,"ion-text"),e.EFF(30,"Following"),e.k0s(),e.j41(31,"p"),e.EFF(32),e.k0s()()(),e.j41(33,"ion-row")(34,"ion-col",14)(35,"ion-button",15),e.bIt("click",function(){return e.eBV(i),e.Njj(n.followUser(null==n.userDetails?null:n.userDetails.uid))}),e.EFF(36),e.k0s()(),e.j41(37,"ion-col",16)(38,"ion-button",17),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateChat(n.userDetails.uid))}),e.EFF(39,"Message"),e.k0s()()()(),e.DNE(40,E,2,1,"ion-row",18)(41,U,4,0,"ng-template",null,0,e.C5r),e.j41(43,"ion-modal",19,1),e.bIt("ionModalDidDismiss",function(){return e.eBV(i),e.Njj(n.closeModal())}),e.DNE(45,j,15,3,"ng-template"),e.k0s()()}if(2&o){const i=e.sdS(42);e.R7$(12),e.Y8G("src",(null==n.userDetails?null:n.userDetails.profilePic)||"../../assets/profile.webp",e.B4B),e.R7$(5),e.JRh(null==n.userDetails?null:n.userDetails.name),e.R7$(2),e.JRh(n.userName),e.R7$(2),e.JRh(null==n.userDetails?null:n.userDetails.bio),e.R7$(6),e.JRh(null==n.userDetails?null:n.userDetails.followersCount),e.R7$(5),e.JRh(null==n.userDetails?null:n.userDetails.followingCount),e.R7$(4),e.SpI(" ",n.isFollowing?"Following":"Follow"," "),e.R7$(4),e.Y8G("ngIf",n.ThisUserPosts.length>0)("ngIfElse",i),e.R7$(3),e.Y8G("isOpen",n.isModalOpen)("initialBreakpoint",1)("breakpoints",e.lJ4(12,k))}},dependencies:[s.rQ,s.el,s.Ki,s.To,s.IO,s.$w,s.iq,s.Jm,s.QW,s.he,s.mC,s.uz,s.nf,s.M0,s.KW,s.hU,s.b_,s.lO,s.ln,s.Sb,s.W9,s.eU,s.BC,s.ai,g.MD,g.Sq,g.bT,u.YN,u.qT,u.BC,u.cb,u.YS,u.vS,u.cV],styles:[".avatar[_ngcontent-%COMP%]{width:100px;height:100px}.post-image[_ngcontent-%COMP%]{height:150px;object-fit:cover}ion-toolbar[_ngcontent-%COMP%]{--background: --ion-color-dark}"]}),a})()}}]);